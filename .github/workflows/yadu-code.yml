name: Yadu Code

on:
  workflow_dispatch:
    inputs:
      run_tests:   { description: 'Run tests',   default: 'true' }
      run_static:  { description: 'Run static checks', default: 'true' }

jobs:
  yadu:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    steps:
      - uses: actions/checkout@v4

      - name: Set up JDK
        uses: actions/setup-java@v4
        with: { distribution: temurin, java-version: '21' }

      - name: Gradle checks (if module exists)
        if: ${{ inputs.run_static == 'true' }}
        run: ./gradlew --console=plain :yadu:check || echo "[yadu] module :yadu not found, skipping"

      - name: Gradle tests (if module exists)
        if: ${{ inputs.run_tests == 'true' }}
        run: ./gradlew --console=plain :yadu:test || echo "[yadu] module :yadu not found, skipping"

      # Если это Node-проект — добавьте сюда альтернативные шаги:
      # - uses: actions/setup-node@v4 ...
      # - run: npm ci && npm test
